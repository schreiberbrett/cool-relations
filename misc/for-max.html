<style>
    table {
        border-collapse: collapse;
        width: 80%;
        height: 80%;
    }

    input {
        color: white;
    }
</style>

<div id="inputs"></div>

<button onclick="solve()">Solve</button>

<table id="result"></table>

<script>
const colors = ['Tomato', 'Orange', 'DodgerBlue', 'MediumSeaGreen', 'Gray', 'SlateBlue', 'Violet', 'LightGray'];

let inputs = document.getElementById('inputs');
for (let i = 0; i < colors.length; i++) {
    let input = document.createElement('input');
    input.type = 'number';
    input.value = 0;
    input.style.backgroundColor = colors[i];
    inputs.appendChild(input);
}

function solve() {
    let inputs = document.getElementsByTagName('input');
    let nums = [];
    for (let input of inputs) {
        nums.push(parseInt(input.value))
    }


    let total = 0;
    for (let num of nums) {
        total += num;
    }


    let factors = [];
    for (let i = 1; i <= total; i++) {
        if (total % i === 0) {
            factors.push(i);
        }
    }

    const height = factors[factors.length / 2];
    const width = total / height;

    const count = nums.map(x => 0);

    let grid = new Array(height);
    for (let i = 0; i < height; i++) {
        grid[i] = new Array(width).fill(false);
    }


    /*             (i, j + 1)
        (i - 1, j) (i, j    ) (i + 1, j)
                   (i, j - 1)
    */
    function hasAdjacent(i, j, color) {
        return (
            (j + 1 < width  && grid[i][j + 1] === color) ||
            (j - 1 >= 0     && grid[i][j - 1] === color) ||
            (i + 1 < height && grid[i + 1][j] === color) ||
            (i - 1 >= 0     && grid[i - 1][j] === color)
        );
    }


    function recur(i, j) {
        if (i === height) return true;
        if (j === width) return recur(i + 1,  0);

        for (let k = 0; k < nums.length; k++) {
            if (count[k] === nums[k]) {
                continue;
            }

            if (count[k] === 0 || hasAdjacent(i, j, colors[k])) {
                grid[i][j] = colors[k];
                count[k]++;

                let result = recur(i, j + 1);
                if (result) {
                    return true;
                }

                grid[i][j] = false;
                count[k]--;
            }
        }

        return false;
    }


    recur(0, 0);

    const table = document.getElementById('result');
    table.innerHTML = '';
    for (let i = 0; i < height; i++) {
        let tr = document.createElement('tr');

        for (let j = 0; j < width; j++) {
            let td = document.createElement('td');
            td.style.backgroundColor = grid[i][j];
            tr.appendChild(td);
        }

        table.appendChild(tr);
    }
}



</script>