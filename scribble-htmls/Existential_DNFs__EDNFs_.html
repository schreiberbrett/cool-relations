<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>14&nbsp;Existential DNFs (EDNFs)</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Cool Relations</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Code_from_The_Reasoned_Schemer_2nd_Edition.html" class="tocviewlink" data-pltdoc="x">Code from The Reasoned Schemer 2nd Edition</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Asserting_that_a_list_is_non-empty.html" class="tocviewlink" data-pltdoc="x">Asserting that a list is non-<wbr></wbr>empty</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="The_Riffle_Relation.html" class="tocviewlink" data-pltdoc="x">The Riffle Relation</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Appending_n_lists_together.html" class="tocviewlink" data-pltdoc="x">Appending <span class="RktSym">n</span> lists together</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="List_Length.html" class="tocviewlink" data-pltdoc="x">List Length</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Smaller_relations.html" class="tocviewlink" data-pltdoc="x">Smaller relations</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Actor_Association_Game.html" class="tocviewlink" data-pltdoc="x">Actor Association Game</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Finite_relationships_using_ino.html" class="tocviewlink" data-pltdoc="x">Finite relationships using <span class="RktSym">ino</span></a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Khmer_Zodiac_Animals.html" class="tocviewlink" data-pltdoc="x">Khmer Zodiac Animals</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="A_worked_example__Decoding_MIPS.html" class="tocviewlink" data-pltdoc="x">A worked example:<span class="mywbr"> &nbsp;</span> Decoding MIPS</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="miniKanren_and_formal_languages.html" class="tocviewlink" data-pltdoc="x">mini<span class="mywbr"> &nbsp;</span>Kanren and formal languages</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="miniKanren_and_the_free_monoid.html" class="tocviewlink" data-pltdoc="x">mini<span class="mywbr"> &nbsp;</span>Kanren and the free monoid</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="First-Order_miniKanren.html" class="tocviewlink" data-pltdoc="x">First-<wbr></wbr>Order mini<span class="mywbr"> &nbsp;</span>Kanren</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Existential DNFs (EDNFs)</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Relational_NatMaps.html" class="tocviewlink" data-pltdoc="x">Relational Nat<span class="mywbr"> &nbsp;</span>Maps</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Prime_factor_encoding.html" class="tocviewlink" data-pltdoc="x">Prime factor encoding</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="Putting_it_all_together.html" class="tocviewlink" data-pltdoc="x">Putting it all together</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="Appendix.html" class="tocviewlink" data-pltdoc="x">Appendix</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>14&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Existential DNFs (EDNFs)</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">14.1&nbsp;</td><td><a href="#%28part._.Conjunction_of_2_.E.D.N.Fs%29" class="tocviewlink" data-pltdoc="x">Conjunction of 2 EDNFs</a></td></tr><tr><td align="right">14.2&nbsp;</td><td><a href="#%28part._.Disjunction_of_two_.E.N.D.Fs%29" class="tocviewlink" data-pltdoc="x">Disjunction of two ENDFs</a></td></tr><tr><td align="right">14.3&nbsp;</td><td><a href="#%28part._.Associative_conjunction__and_disjunction_%29" class="tocviewlink" data-pltdoc="x">Associative conjunction* and disjunction*</a></td></tr><tr><td align="right">14.4&nbsp;</td><td><a href="#%28part._.Converting_a_mini.Kanren_expression_into_.E.D.N.F%29" class="tocviewlink" data-pltdoc="x">Converting a mini<span class="mywbr"> &nbsp;</span>Kanren expression into EDNF</a></td></tr><tr><td align="right">14.5&nbsp;</td><td><a href="#%28part._.Replace_definitions_in_.E.D.N.F%29" class="tocviewlink" data-pltdoc="x">Replace definitions in EDNF</a></td></tr><tr><td align="right">14.6&nbsp;</td><td><a href="#%28part._.A_small_portion_of_the_algorithm%29" class="tocviewlink" data-pltdoc="x">A small portion of the algorithm</a></td></tr><tr><td align="right">14.7&nbsp;</td><td><a href="#%28part._.Running_an_.E.D.N.F%29" class="tocviewlink" data-pltdoc="x">Running an EDNF</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">14.1<tt>&nbsp;</tt></span><a href="#%28part._.Conjunction_of_2_.E.D.N.Fs%29" class="tocsubseclink" data-pltdoc="x">Conjunction of 2 EDNFs</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cconjunction-of-ednfs~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;conjunction-of-ednfs&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3ccartesian-product-with-append~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;cartesian-product-with-append&gt;</a></span></td></tr><tr><td><span class="tocsublinknumber">14.2<tt>&nbsp;</tt></span><a href="#%28part._.Disjunction_of_two_.E.N.D.Fs%29" class="tocsubseclink" data-pltdoc="x">Disjunction of two ENDFs</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cdisjunction-of-ednfs~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;disjunction-of-ednfs&gt;</a></span></td></tr><tr><td><span class="tocsublinknumber">14.3<tt>&nbsp;</tt></span><a href="#%28part._.Associative_conjunction__and_disjunction_%29" class="tocsubseclink" data-pltdoc="x">Associative conjunction* and disjunction*</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cassociative-conjunction%2A-and-disjunction%2A~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;associative-conjunction*-and-disjunction*&gt;</a></span></td></tr><tr><td><span class="tocsublinknumber">14.4<tt>&nbsp;</tt></span><a href="#%28part._.Converting_a_mini.Kanren_expression_into_.E.D.N.F%29" class="tocsubseclink" data-pltdoc="x">Converting a mini<span class="mywbr"> &nbsp;</span>Kanren expression into EDNF</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cexp-to-ednf~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;exp-to-ednf&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cconjunction-to-ednf~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;conjunction-to-ednf&gt;</a></span></td></tr><tr><td><span class="tocsublinknumber">14.5<tt>&nbsp;</tt></span><a href="#%28part._.Replace_definitions_in_.E.D.N.F%29" class="tocsubseclink" data-pltdoc="x">Replace definitions in EDNF</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3creplace-definitions-in-ednf~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;replace-definitions-in-ednf&gt;</a></span></td></tr><tr><td><span class="tocsublinknumber">14.6<tt>&nbsp;</tt></span><a href="#%28part._.A_small_portion_of_the_algorithm%29" class="tocsubseclink" data-pltdoc="x">A small portion of the algorithm</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3calgorithm-subset~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;algorithm-subset&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3calgorithm-subset-iterative~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;algorithm-subset-iterative&gt;</a></span></td></tr><tr><td><span class="tocsublinknumber">14.7<tt>&nbsp;</tt></span><a href="#%28part._.Running_an_.E.D.N.F%29" class="tocsubseclink" data-pltdoc="x">Running an EDNF</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cexistential-dnfs~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;existential-dnfs&gt;</a></span></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="First-Order_miniKanren.html" title="backward to &quot;13 First-Order miniKanren&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Cool Relations&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Relational_NatMaps.html" title="forward to &quot;15 Relational NatMaps&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>14<tt>&nbsp;</tt><a name="(part._.Existential_.D.N.Fs__.E.D.N.Fs_)"></a>Existential DNFs (EDNFs)</h3><p>An existential DNF is a special form of a miniKanren fresh. It is a fresh of n variables and only one clause: a conde clause. And no fresh or conde appear in any branches of the conde clause. It is useful to have relations in this form for reasons discussed later.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">fresh</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x1</span><span class="hspace">&nbsp;</span><span class="RktSym">x2</span><span class="hspace">&nbsp;</span><span class="RktSym">x3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">xn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conde</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">r11</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a11</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">r12</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a12</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">r1i</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a1i</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">r21</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a21</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">r22</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a22</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">r2i</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a2i</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">rj1</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">aj1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rj2</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">aj2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rij</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">aij</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Here is what an existential DNF looks like in traditional notation:</p><p>&#8707;x&#8321;x&#8322;x&#8323;...x&#8345;&#8897;&#8305;&#8896;&#690;&#981;</p><p>where &#981; is a stand in for any logical predicate.</p><h4>14.1<tt>&nbsp;</tt><a name="(part._.Conjunction_of_2_.E.D.N.Fs)"></a>Conjunction of 2 EDNFs</h4><p>The conjunction of two existential DNFs can itself be represented as an existential DNF.</p><p>(&#8707;x&#8321;x&#8322;x&#8323;...x&#8345;&#8897;&#8305;&#8896;&#690;&#981;)&#8743;(&#8707;y&#8321;y&#8322;y&#8323;...y&#8345;&#8897;&#7503;&#8896;&#737;&#981;) = &#8707;x&#8321;x&#8322;x&#8323;...x&#8345;y&#8321;y&#8322;y&#8323;...y&#8345;&#8897;&#8305;*&#7503;&#8896;&#690;&#8314;&#737;&#981;</p><p>In miniKanren</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conj</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x1</span><span class="hspace">&nbsp;</span><span class="RktSym">x2</span><span class="hspace">&nbsp;</span><span class="RktSym">x3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">xn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conde</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p11</span><span class="hspace">&nbsp;</span><span class="RktSym">p12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p1j</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p21</span><span class="hspace">&nbsp;</span><span class="RktSym">p22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p2j</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pi1</span><span class="hspace">&nbsp;</span><span class="RktSym">pi2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">pij</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">y1</span><span class="hspace">&nbsp;</span><span class="RktSym">y2</span><span class="hspace">&nbsp;</span><span class="RktSym">y3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">ym</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conde</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">q11</span><span class="hspace">&nbsp;</span><span class="RktSym">q12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q1l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">q21</span><span class="hspace">&nbsp;</span><span class="RktSym">q22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q2l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">qk1</span><span class="hspace">&nbsp;</span><span class="RktSym">qk2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">qkl</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x1</span><span class="hspace">&nbsp;</span><span class="RktSym">x2</span><span class="hspace">&nbsp;</span><span class="RktSym">x3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">xn</span><span class="hspace">&nbsp;</span><span class="RktSym">y1</span><span class="hspace">&nbsp;</span><span class="RktSym">y2</span><span class="hspace">&nbsp;</span><span class="RktSym">y3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">ym</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conde</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p11</span><span class="hspace">&nbsp;</span><span class="RktSym">p12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p1j</span><span class="hspace">&nbsp;</span><span class="RktSym">q11</span><span class="hspace">&nbsp;</span><span class="RktSym">q12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q1l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p11</span><span class="hspace">&nbsp;</span><span class="RktSym">p12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p1j</span><span class="hspace">&nbsp;</span><span class="RktSym">q21</span><span class="hspace">&nbsp;</span><span class="RktSym">q22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q2l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p11</span><span class="hspace">&nbsp;</span><span class="RktSym">p12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p1j</span><span class="hspace">&nbsp;</span><span class="RktSym">qk1</span><span class="hspace">&nbsp;</span><span class="RktSym">qk2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">qkl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p21</span><span class="hspace">&nbsp;</span><span class="RktSym">p22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p2j</span><span class="hspace">&nbsp;</span><span class="RktSym">q11</span><span class="hspace">&nbsp;</span><span class="RktSym">q12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q1l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p21</span><span class="hspace">&nbsp;</span><span class="RktSym">p22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p2j</span><span class="hspace">&nbsp;</span><span class="RktSym">q21</span><span class="hspace">&nbsp;</span><span class="RktSym">q22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q2l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p21</span><span class="hspace">&nbsp;</span><span class="RktSym">p22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p2j</span><span class="hspace">&nbsp;</span><span class="RktSym">qk1</span><span class="hspace">&nbsp;</span><span class="RktSym">qk2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">qkl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pi1</span><span class="hspace">&nbsp;</span><span class="RktSym">pi2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">pij</span><span class="hspace">&nbsp;</span><span class="RktSym">q11</span><span class="hspace">&nbsp;</span><span class="RktSym">q12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q1l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pi1</span><span class="hspace">&nbsp;</span><span class="RktSym">pi2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">pij</span><span class="hspace">&nbsp;</span><span class="RktSym">q21</span><span class="hspace">&nbsp;</span><span class="RktSym">q22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q2l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pi1</span><span class="hspace">&nbsp;</span><span class="RktSym">pi2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">pij</span><span class="hspace">&nbsp;</span><span class="RktSym">qk1</span><span class="hspace">&nbsp;</span><span class="RktSym">qk2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">qkl</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Here is the full definition in Racket.</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cconjunction-of-ednfs~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cconjunction-of-ednfs~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;conjunction-of-ednfs&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conjunction</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">match</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktRdr">,</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">b</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">xs</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">ps</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">ys</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">qs</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="hspace">&nbsp;</span><span class="RktSym">ys</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">cartesian-product-with-append</span><span class="hspace">&nbsp;</span><span class="RktSym">ps</span><span class="hspace">&nbsp;</span><span class="RktSym">qs</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Here, <span class="RktPn">(</span><span class="RktSym">cartesian-product-with-append</span><span class="stt"> </span><span class="RktSym">xs</span><span class="stt"> </span><span class="RktSym">ys</span><span class="RktPn">)</span>, means the same as [x ++ y | x &lt;- xs, y &lt;- ys] in Haskell.</p><p>[x ++ y | x &lt;- xs, y &lt;- ys]</p><p>= do x &lt;- xs; y &lt;- ys; return x ++ y</p><p>= concatMap (\x -&gt; concatMap (\y -&gt; return x ++ y) ys) xs</p><p>= concatMap (\x -&gt; concatMap (\y -&gt; [x ++ y]) ys) xs</p><p>= concatMap (\x -&gt; map (\y -&gt; x ++ y) ys) xs</p><p><div class="SIntrapara">Which is finally a form translateable to Scheme.
<a name="(elem._(chunk._~3ccartesian-product-with-append~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3ccartesian-product-with-append~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;cartesian-product-with-append&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cartesian-product-with-append</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="hspace">&nbsp;</span><span class="RktSym">ys</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append-map</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">ys</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4>14.2<tt>&nbsp;</tt><a name="(part._.Disjunction_of_two_.E.N.D.Fs)"></a>Disjunction of two ENDFs</h4><p>A disjunction of two EDNFs is:</p><p>In miniKanren:-</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">disj</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x1</span><span class="hspace">&nbsp;</span><span class="RktSym">x2</span><span class="hspace">&nbsp;</span><span class="RktSym">x3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">xn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conde</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p11</span><span class="hspace">&nbsp;</span><span class="RktSym">p12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p1j</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p21</span><span class="hspace">&nbsp;</span><span class="RktSym">p22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p2j</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pi1</span><span class="hspace">&nbsp;</span><span class="RktSym">pi2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">pij</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">y1</span><span class="hspace">&nbsp;</span><span class="RktSym">y2</span><span class="hspace">&nbsp;</span><span class="RktSym">y3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">ym</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conde</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">q11</span><span class="hspace">&nbsp;</span><span class="RktSym">q12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q1l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">q21</span><span class="hspace">&nbsp;</span><span class="RktSym">q22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q2l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">qk1</span><span class="hspace">&nbsp;</span><span class="RktSym">qk2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">qkl</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x1</span><span class="hspace">&nbsp;</span><span class="RktSym">x2</span><span class="hspace">&nbsp;</span><span class="RktSym">x3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">xn</span><span class="hspace">&nbsp;</span><span class="RktSym">y1</span><span class="hspace">&nbsp;</span><span class="RktSym">y2</span><span class="hspace">&nbsp;</span><span class="RktSym">y3</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">ym</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conde</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p11</span><span class="hspace">&nbsp;</span><span class="RktSym">p12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p1j</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p21</span><span class="hspace">&nbsp;</span><span class="RktSym">p22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">p2j</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pi1</span><span class="hspace">&nbsp;</span><span class="RktSym">pi2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">pij</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">q11</span><span class="hspace">&nbsp;</span><span class="RktSym">q12</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q1l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">q21</span><span class="hspace">&nbsp;</span><span class="RktSym">q22</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">q2l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">qk1</span><span class="hspace">&nbsp;</span><span class="RktSym">qk2</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">qkl</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><a name="(elem._(chunk._~3cdisjunction-of-ednfs~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cdisjunction-of-ednfs~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;disjunction-of-ednfs&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">disjunction</span><span class="hspace">&nbsp;</span><span class="RktSym">ednf-a</span><span class="hspace">&nbsp;</span><span class="RktSym">ednf-b</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">match</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktRdr">,</span><span class="RktSym">ednf-a</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">ednf-b</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">xs</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">ps</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">ys</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">qs</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="hspace">&nbsp;</span><span class="RktSym">ys</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">ps</span><span class="hspace">&nbsp;</span><span class="RktSym">qs</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4>14.3<tt>&nbsp;</tt><a name="(part._.Associative_conjunction__and_disjunction_)"></a>Associative conjunction* and disjunction*</h4><p><div class="SIntrapara"><a name="(elem._(chunk._~3cassociative-conjunction*-and-disjunction*~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cassociative-conjunction%2A-and-disjunction%2A~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;associative-conjunction*-and-disjunction*&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conjunction*</span><span class="hspace">&nbsp;</span><span class="RktSym">ednfs</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">match</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">ednfs</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktRdr">,</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">d</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conjunction</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conjunction*</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">disjunction*</span><span class="hspace">&nbsp;</span><span class="RktSym">ednfs</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">match</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">ednfs</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktRdr">,</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">d</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">disjunction</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">disjunction*</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4>14.4<tt>&nbsp;</tt><a name="(part._.Converting_a_mini.Kanren_expression_into_.E.D.N.F)"></a>Converting a miniKanren expression into EDNF</h4><p><div class="SIntrapara"><a name="(elem._(chunk._~3cexp-to-ednf~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cexp-to-ednf~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;exp-to-ednf&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">match</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">exps</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">match</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conjunction*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">xs</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">ps</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">ps</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">exps*</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">disjunction*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conjunction*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">exps*</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktRdr">,</span><span class="RktSym">rel</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">args</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktRdr">,</span><span class="RktSym">rel</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">args</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Since a <span class="RktSym">run</span> statement takes a conjunction of expressions, it is necessary to have a version from conjunction to ednf.</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cconjunction-to-ednf~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cconjunction-to-ednf~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;conjunction-to-ednf&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conjunction-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conjunction*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4>14.5<tt>&nbsp;</tt><a name="(part._.Replace_definitions_in_.E.D.N.F)"></a>Replace definitions in EDNF</h4><p>The <span class="RktSym">replace-definitions</span> function takes a list of expressions rather than a single expression, but an EDNF is a single expression. So a new function is needed that works specifically on EDNFs.</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3creplace-definitions-in-ednf~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3creplace-definitions-in-ednf~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;replace-definitions-in-ednf&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">replace-definitions-in-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">defrels</span><span class="hspace">&nbsp;</span><span class="RktSym">ednf</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">match</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">ednf</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">exps*</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">replace-definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">defrels</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">exps*</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4>14.6<tt>&nbsp;</tt><a name="(part._.A_small_portion_of_the_algorithm)"></a>A small portion of the algorithm</h4><p>At this point there is enough code to write a small portion of the overall algorithm, namely:</p><p><img src="algorithm-design-subset.png" alt="" width="411" height="193"/></p><p>Below is an implementation of this subset on some sample miniKanren code.</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3calgorithm-subset~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3calgorithm-subset~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;algorithm-subset&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">algorithm-subset</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">defrels</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">defrel</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">appendo</span><span class="hspace">&nbsp;</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktVal">o</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">==</span><span class="hspace">&nbsp;</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">==</span><span class="hspace">&nbsp;</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktVal">o</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h</span><span class="hspace">&nbsp;</span><span class="RktVal">t</span><span class="hspace">&nbsp;</span><span class="RktVal">rec</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">==</span><span class="hspace">&nbsp;</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">,</span><span class="RktVal">h</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">,</span><span class="RktVal">t</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">==</span><span class="hspace">&nbsp;</span><span class="RktVal">o</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">,</span><span class="RktVal">h</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">,</span><span class="RktVal">rec</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">appendo</span><span class="hspace">&nbsp;</span><span class="RktVal">t</span><span class="hspace">&nbsp;</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktVal">rec</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">appendo</span><span class="hspace">&nbsp;</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktVal">o</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ednf1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">replace-definitions-in-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">defrels</span><span class="hspace">&nbsp;</span><span class="RktSym">ednf1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ednf2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">replace-definitions-in-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">defrels</span><span class="hspace">&nbsp;</span><span class="RktSym">ednf2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ednf3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">print</span><span class="hspace">&nbsp;</span><span class="RktSym">ednf1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n\n"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">print</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n\n"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">print</span><span class="hspace">&nbsp;</span><span class="RktSym">ednf2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n\n"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">print</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n\n"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">print</span><span class="hspace">&nbsp;</span><span class="RktSym">ednf3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(chunk._~3calgorithm-subset-iterative~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3calgorithm-subset-iterative~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;algorithm-subset-iterative&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">algorithm-subset-iterative</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">defrels</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">match</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">_</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">algorithm-subset-iterative</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">defrels</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">replace-definitions-in-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">defrels</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp-to-ednf</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">my-defrels</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">defrel</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">appendo</span><span class="hspace">&nbsp;</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktVal">o</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">conde</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">==</span><span class="hspace">&nbsp;</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">==</span><span class="hspace">&nbsp;</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktVal">o</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">fresh</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h</span><span class="hspace">&nbsp;</span><span class="RktVal">t</span><span class="hspace">&nbsp;</span><span class="RktVal">rec</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">==</span><span class="hspace">&nbsp;</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">,</span><span class="RktVal">h</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">,</span><span class="RktVal">t</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">==</span><span class="hspace">&nbsp;</span><span class="RktVal">o</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">,</span><span class="RktVal">h</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">,</span><span class="RktVal">rec</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">appendo</span><span class="hspace">&nbsp;</span><span class="RktVal">t</span><span class="hspace">&nbsp;</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktVal">rec</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">my-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">appendo</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">z</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4>14.7<tt>&nbsp;</tt><a name="(part._.Running_an_.E.D.N.F)"></a>Running an EDNF</h4><p>An EDNF is just a special form of the fresh expression in miniKanren. So imagine the special case of <span class="RktSym">run</span> or <span class="RktSym">run*</span> where the expression is an EDNF.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">run</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">q</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">conde</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">==</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">q</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">fooo</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">==</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">q</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">b</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">baro</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">==</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">q</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">bazo</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">Code used:
<a name="(elem._(chunk._~3cexistential-dnfs~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cexistential-dnfs~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;existential-dnfs&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="#%28elem._%28chunk._~3cconjunction-of-ednfs~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;conjunction-of-ednfs&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3cdisjunction-of-ednfs~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;disjunction-of-ednfs&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3cassociative-conjunction%2A-and-disjunction%2A~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;associative-conjunction*-and-disjunction*&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3cexp-to-ednf~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;exp-to-ednf&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3cconjunction-to-ednf~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;conjunction-to-ednf&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3creplace-definitions-in-ednf~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;replace-definitions-in-ednf&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3calgorithm-subset~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;algorithm-subset&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3calgorithm-subset-iterative~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;algorithm-subset-iterative&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3ccartesian-product-with-append~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;cartesian-product-with-append&gt;</a></td></tr></table></blockquote></div></p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="First-Order_miniKanren.html" title="backward to &quot;13 First-Order miniKanren&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Cool Relations&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Relational_NatMaps.html" title="forward to &quot;15 Relational NatMaps&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>